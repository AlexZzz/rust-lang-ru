## Привет, мир!

Теперь, когда вы установили Rust, пришло время написать свою первую программу на Rust. Традиционно при изучении нового языка принято писать небольшую программу, которая печатает на экране текст `Hello, world!`, поэтому мы сделаем то же самое!

>  Примечание: Эта книга предполагает базовое знакомство с командной строкой. Rust не предъявляет особых требований к средствам редактирования, инструментарию или месту размещения кода, поэтому если вы предпочитаете использовать интегрированную среду разработки (IDE) вместо командной строки, смело используйте вашу любимую IDE. Многие IDE сейчас в той или иной степени поддерживают Rust; подробности можно узнать из документации к IDE. Команда Rust сосредоточилась на обеспечении отличной поддержки IDE с помощью `rust-analyzer`. Более подробную информацию смотрите в [Приложении D].

### Создание папки проекта

Для начала вы создадите каталог для хранения вашего кода Rust. Для Rust не имеет значения, где находится ваш код, но для упражнений и проектов в этой книге мы рекомендуем создать каталог *projects* в вашем домашнем каталоге и хранить там все ваши проекты.

Откройте терминал и введите следующие команды, чтобы создать каталог <em>projects</em> и каталог для проекта "Hello, world!" в каталоге <em>projects</em>.

Для Linux, macOS и PowerShell на Windows, введите:

```console
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Для Windows в CMD, введите:

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### Написание и запуск программы Rust

Далее создадим новый файл с исходным кодом и назовем его *main.rs*. Файлы Rust всегда заканчиваются расширением *.rs*. Если в имени файла используется более одного слова, принято разделять их знаком подчеркивания. Например, используйте *hello_world.rs*, а не *helloworld.rs*.

Теперь откроем файл *main.rs* для редактирования и введём следующие строки кода:

<span class="filename">Название файла: main.rs</span>

```rust
fn main() {
    println!("Hello, world!");
}
```

<span class="caption">Листинг 1-1: Программа, которая печатает <code>Hello, world!</code></span>

Сохраните файл и вернитесь в окно терминала в каталог *~/projects/hello_world*. В Linux или macOS введите следующие команды для компиляции и запуска файла:

```console
$ rustc main.rs
$ ./main
Hello, world!
```

В Windows, введите команду `.\main.exe` вместо `./main`:

```powershell
> rustc main.rs
> .\main.exe
Hello, world!
```

Независимо от вашей операционной системы, строка `Hello, world!` должна быть выведена на терминал. Если вы не видите такого вывода, обратитесь к разделу ["Устранение неполадок"], чтобы узнать, как получить помощь.

Если был выведен `Hello, world!`, поздравляем! Вы официально написали программу на Rust. Таким образом, вы стали программистом Rust - добро пожаловать!

### Анатомия программы на Rust

Давайте рассмотрим программу "Hello, world!" более подробно. Вот первый кусочек головоломки:

```rust
fn main() {

}
```

В этих строках определяется функция main. Функция main является особенной: это всегда первый код, который выполняется в каждой исполняемой программе Rust. Здесь в первой строке объявляется функция main, которая не имеет параметров и ничего не возвращает. Если бы параметры были, они бы находились внутри круглых скобок ().

Тело функции обернуто в `{}`. Rust требует заключать в фигурные скобки все тело функции. Хорошим стилем является размещение открывающей фигурной скобки на той же строке, что и объявление функции, с добавлением одного пробела между ними.

> Примечание: Если хотите придерживаться стандартного стиля во всех проектах Rust, вы можете использовать инструмент автоматического форматирования под названием `rustfmt` для форматирования кода в определенном стиле (подробнее о `rustfmt` в [Приложении D](appendix-04-useful-development-tools.md). Команда Rust включила этот инструмент в стандартный дистрибутив Rust, как `rustc`, поэтому он уже должен быть установлен на вашем компьютере!

Тело функции `main` содержит следующий код:

```rust
    println!("Hello, world!");
```

Эта строка делает всю работу в этой маленькой программе: печатает текст на экран. Можно заметить четыре важных детали.

Во-первых, стиль Rust предполагает отступ в четыре пробела, а не табуляцию.

Во-вторых, `println!` вызывается макрос Rust. Если бы вместо него была вызвана функция, она была бы набрана как `println` (без `!`). Более подробно мы обсудим макросы Rust в главе 19. Пока достаточно знать, что использование `!` подразумевает вызов макроса вместо обычной функции, и что макросы не всегда подчиняются тем же правилам как функции.

В-третьих, вы видите строку `"Hello, world!"`. Мы передаём её в качестве аргумента макросу `println!`, и она выводится на экран.

В-четвертых, мы завершаем строку точкой с запятой (`;`), которая указывает на окончание этого выражения и возможность начала следующего. Большинство строк кода Rust заканчиваются точкой с запятой.

### Компиляция и запуск - это отдельные шаги

Вы только что запустили впервые созданную программу, поэтому давайте рассмотрим каждый шаг этого процесса.

Перед запуском программы на Rust вы должны скомпилировать её с помощью компилятора Rust, введя команду `rustc` и передав ей имя вашего исходного файла, например:

```console
$ rustc main.rs
```

Если у вас есть опыт работы с C или C++, то можете заметить, что это похоже на gcc или clang. После успешной компиляции Rust создает бинарный исполняемый файл.

В Linux, macOS и PowerShell в Windows вы можете увидеть исполняемый файл, введя команду `ls` в оболочке:

```console
$ ls
main  main.rs
```

В Linux и macOS вы увидите два файла. При использовании PowerShell в Windows вы увидите такие же три файла, как и при использовании CMD. Используя CMD в Windows, введите следующее:

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

Здесь показан файл с исходным кодом с расширением *.rs*, исполняемый файл (*main.exe* в Windows, a не *main* как на всех других платформах) и, при использовании Windows, файл с отладочной информацией с расширением *.pdb*. Отсюда вы запускаете файл *main* или *main.exe*, как показано ниже:

```console
$ ./main # для Linux
> .\main.exe # для Windows
```

Если ваш *main.rs* - это программа "Hello, world!", то эта строка выводит `Hello, world!` в терминал.

Если вы лучше знакомы с динамическими языками, такими как Ruby, Python или JavaScript, возможно, вы не привыкли компилировать и запускать программу как отдельные шаги. Rust — это предварительно *скомпилированный* язык, то есть вы можете скомпилировать программу и передать исполняемый файл кому-то другому, и он сможет запустить его даже без установленного Rust. Если вы даёте кому-то файл *.rb* , *.py* или *.js*, у него должна быть установлена реализация Ruby, Python или JavaScript (соответственно). Но в этих языках вам нужна только одна команда для компиляции и запуска вашей программы. В дизайне языков программирования всё — компромисс.

Компиляция с помощью `rustc` подходит для простых программ, но по мере роста вашего проекта вы захотите управлять всеми параметрами и упростить передачу кода. Далее мы познакомим вас с инструментом Cargo, который поможет вам писать программы из реального мира на Rust.


["Устранение неполадок"]: ch01-01-installation.html#troubleshooting
[Приложении D]: appendix-04-useful-development-tools.md